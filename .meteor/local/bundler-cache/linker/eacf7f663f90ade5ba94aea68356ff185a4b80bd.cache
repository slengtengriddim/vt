[{"type":"js","data":"(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar moment = Package['momentjs:moment'].moment;\n\n(function(){\n\n///////////////////////////////////////////////////////////////////////\n//                                                                   //\n// packages/msio_moment-round/moment-round.js                        //\n//                                                                   //\n///////////////////////////////////////////////////////////////////////\n                                                                     //\nmoment.fn.round = function (precision, key, direction) {\n    if (typeof direction === 'undefined') {\n        direction = 'round';\n    }\n\n    var keys = ['Hours', 'Minutes', 'Seconds', 'Milliseconds'];\n    var maxValues = [24, 60, 60, 1000];\n\n    // Capitalize first letter\n    key = key.charAt(0)\n            .toUpperCase() + key.slice(1)\n            .toLowerCase();\n\n    // make sure key is plural\n    if (key.indexOf('s', key.length - 1) === -1) {\n        key += 's';\n    }\n    var value = 0;\n    var rounded = false;\n    var subRatio = 1;\n    var maxValue;\n    for (var i in keys) {\n        var k = keys[i];\n        if (k === key) {\n            value = this._d['get' + key]();\n            maxValue = maxValues[i];\n            rounded = true;\n        } else if (rounded) {\n            subRatio *= maxValues[i];\n            value += this._d['get' + k]() / subRatio;\n            this._d['set' + k](0);\n        }\n    };\n\n    value = Math[direction](value / precision) * precision;\n    value = Math.min(value, maxValue);\n    this._d['set' + key](value);\n\n    return this;\n}\n\nmoment.fn.ceil = function (precision, key) {\n    return this.round(precision, key, 'ceil');\n}\n\nmoment.fn.floor = function (precision, key) {\n    return this.round(precision, key, 'floor');\n}\n///////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['msio:moment-round'] = {};\n\n})();\n","servePath":"/packages/msio_moment-round.js"}]