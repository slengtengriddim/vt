{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/views/high/stats/charts/chart_fav_pie.js","filenameRelative":"/client/views/high/stats/charts/chart_fav_pie.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/views/high/stats/charts/chart_fav_pie.js.map","sourceFileName":"/client/views/high/stats/charts/chart_fav_pie.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"chart_fav_pie"},"ignored":false,"code":"Template.chartFavPie.onCreated(function () {\n\tvar template = Template.instance();\n\ttemplate.subscribe('dataFavHigh');\n\ttemplate.subscribe('dataFavLow');\n});\n\n// let sumLow = R.sum(R.pluck('y')(Data.Fav.Low.find({}).fetch()));\n// let sumHigh = R.sum(R.pluck('y')(Data.Fav.High.find({}).fetch()));\n// let data = [{\n// \tkey: \"High\",\n// \ty: sumHigh\n// }, {\n// \tkey: \"Low\",\n// \ty: sumLow\n// }];\n\nTemplate.chartFavPie.rendered = function () {\n\n\tvar height = 350;\n\tvar width = 350;\n\t// chart object\n\tvar chart = nv.models.pieChart().x(function (d) {\n\t\treturn d.key;\n\t}).y(function (d) {\n\t\treturn d.y;\n\t}).width(width).height(height);\n\n\t// chart details\n\tnv.addGraph(function () {\n\t\tvar sumLow = R.sum(R.pluck('y')(Data.Fav.Low.find({}).fetch()));\n\t\tvar sumHigh = R.sum(R.pluck('y')(Data.Fav.High.find({}).fetch()));\n\t\tvar data = [{\n\t\t\tkey: \"High\",\n\t\t\ty: sumHigh\n\t\t}, {\n\t\t\tkey: \"Low\",\n\t\t\ty: sumLow\n\t\t}];\n\n\t\td3.select('#chartFavPie svg').datum(data).transition().duration(1200).attr('width', width).attr('height', height).call(chart);\n\n\t\t// nv.utils.windowResize(chart.update);\n\n\t\treturn chart;\n\t});\n\n\t// update chart when data changes\n\tthis.autorun(function () {\n\t\tvar sumLow = R.sum(R.pluck('y')(Data.Fav.Low.find({}).fetch()));\n\t\tvar sumHigh = R.sum(R.pluck('y')(Data.Fav.High.find({}).fetch()));\n\t\tvar data = [{\n\t\t\tkey: \"High\",\n\t\t\ty: sumHigh\n\t\t}, {\n\t\t\tkey: \"Low\",\n\t\t\ty: sumLow\n\t\t}];\n\n\t\td3.select('#chartFavPie svg').datum(data).transition().duration(1200).attr('width', width).attr('height', height).call(chart);\n\n\t\tchart.update();\n\t});\n};","ast":null,"map":{"version":3,"sources":["/client/views/high/stats/charts/chart_fav_pie.js"],"names":[],"mappings":"AAAA,SAAS,WAAT,CAAqB,SAArB,CAA+B,YAAM;AACpC,KAAI,WAAW,SAAS,QAAT,EAAX,CADgC;AAEpC,UAAS,SAAT,CAAmB,aAAnB,EAFoC;AAGpC,UAAS,SAAT,CAAmB,YAAnB,EAHoC;CAAN,CAA/B;;;;;;;;;;;;AAoBA,SAAS,WAAT,CAAqB,QAArB,GAAgC,YAAW;;AAE1C,KAAI,SAAS,GAAT,CAFsC;AAG3C,KAAI,QAAQ,GAAR;;AAHuC,KAKrC,QAAQ,GAAG,MAAH,CAAU,QAAV,GACX,CADW,CACT,UAAS,CAAT,EAAY;AAAE,SAAO,EAAE,GAAF,CAAT;EAAZ,CADS,CAEX,CAFW,CAET,UAAS,CAAT,EAAY;AAAE,SAAO,EAAE,CAAF,CAAT;EAAZ,CAFS,CAGX,KAHW,CAGL,KAHK,EAIX,MAJW,CAIJ,MAJI,CAAR;;;AALqC,GAYzC,CAAG,QAAH,CAAY,YAAW;AACtB,MAAI,SAAS,EAAE,GAAF,CAAM,EAAE,KAAF,CAAQ,GAAR,EAAa,KAAK,GAAL,CAAS,GAAT,CAAa,IAAb,CAAkB,EAAlB,EAAsB,KAAtB,EAAb,CAAN,CAAT,CADkB;AAEtB,MAAI,UAAU,EAAE,GAAF,CAAM,EAAE,KAAF,CAAQ,GAAR,EAAa,KAAK,GAAL,CAAS,IAAT,CAAc,IAAd,CAAmB,EAAnB,EAAuB,KAAvB,EAAb,CAAN,CAAV,CAFkB;AAGtB,MAAI,OAAO,CAAC;AACX,QAAK,MAAL;AACA,MAAG,OAAH;GAFU,EAGR;AACF,QAAK,KAAL;AACA,MAAG,MAAH;GALU,CAAP,CAHkB;;AAWtB,KAAG,MAAH,CAAU,kBAAV,EACK,KADL,CACW,IADX,EAEG,UAFH,GAEgB,QAFhB,CAEyB,IAFzB,EAGG,IAHH,CAGQ,OAHR,EAGiB,KAHjB,EAIG,IAJH,CAIQ,QAJR,EAIkB,MAJlB,EAKG,IALH,CAKQ,KALR;;;;AAXsB,SAoBf,KAAP,CApBsB;EAAX,CAAZ;;;AAZyC,KAoCzC,CAAK,OAAL,CAAa,YAAW;AACvB,MAAI,SAAS,EAAE,GAAF,CAAM,EAAE,KAAF,CAAQ,GAAR,EAAa,KAAK,GAAL,CAAS,GAAT,CAAa,IAAb,CAAkB,EAAlB,EAAsB,KAAtB,EAAb,CAAN,CAAT,CADmB;AAEvB,MAAI,UAAU,EAAE,GAAF,CAAM,EAAE,KAAF,CAAQ,GAAR,EAAa,KAAK,GAAL,CAAS,IAAT,CAAc,IAAd,CAAmB,EAAnB,EAAuB,KAAvB,EAAb,CAAN,CAAV,CAFmB;AAGvB,MAAI,OAAO,CAAC;AACX,QAAK,MAAL;AACA,MAAG,OAAH;GAFU,EAGR;AACF,QAAK,KAAL;AACA,MAAG,MAAH;GALU,CAAP,CAHmB;;AAWvB,KAAG,MAAH,CAAU,kBAAV,EACK,KADL,CACW,IADX,EAEG,UAFH,GAEgB,QAFhB,CAEyB,IAFzB,EAGG,IAHH,CAGQ,OAHR,EAGiB,KAHjB,EAIG,IAJH,CAIQ,QAJR,EAIkB,MAJlB,EAKG,IALH,CAKQ,KALR,EAXuB;;AAkBvB,QAAM,MAAN,GAlBuB;EAAX,CAAb,CApCyC;CAAX","file":"/client/views/high/stats/charts/chart_fav_pie.js.map","sourcesContent":["Template.chartFavPie.onCreated(() => {\n\tlet template = Template.instance();\n\ttemplate.subscribe('dataFavHigh');\n\ttemplate.subscribe('dataFavLow');\n});\n\n\n// let sumLow = R.sum(R.pluck('y')(Data.Fav.Low.find({}).fetch()));\n// let sumHigh = R.sum(R.pluck('y')(Data.Fav.High.find({}).fetch()));\n// let data = [{\n// \tkey: \"High\",\n// \ty: sumHigh\n// }, {\n// \tkey: \"Low\",\n// \ty: sumLow\n// }];\n\n\n\n\nTemplate.chartFavPie.rendered = function() {\n\n\tvar height = 350;\nvar width = 350;\n\t\t// chart object\n\t\tvar chart = nv.models.pieChart()\n\t\t.x(function(d) { return d.key })\n\t\t.y(function(d) { return d.y })\n\t\t.width(width)\n\t\t.height(height);\n\n\t\t// chart details\n\t\tnv.addGraph(function() {\n\t\t\tlet sumLow = R.sum(R.pluck('y')(Data.Fav.Low.find({}).fetch()));\n\t\t\tlet sumHigh = R.sum(R.pluck('y')(Data.Fav.High.find({}).fetch()));\n\t\t\tlet data = [{\n\t\t\t\tkey: \"High\",\n\t\t\t\ty: sumHigh\n\t\t\t}, {\n\t\t\t\tkey: \"Low\",\n\t\t\t\ty: sumLow\n\t\t\t}];\n\n\t\t\td3.select('#chartFavPie svg')\n\t\t\t    .datum(data)\n\t\t\t\t\t.transition().duration(1200)\n\t\t\t\t\t.attr('width', width)\n\t\t\t\t\t.attr('height', height)\n\t\t\t\t\t.call(chart);\n\n\t\t\t// nv.utils.windowResize(chart.update);\n\n\t\t\treturn chart;\n\t\t});\n\n\t\t// update chart when data changes\n\t\tthis.autorun(function() {\n\t\t\tlet sumLow = R.sum(R.pluck('y')(Data.Fav.Low.find({}).fetch()));\n\t\t\tlet sumHigh = R.sum(R.pluck('y')(Data.Fav.High.find({}).fetch()));\n\t\t\tlet data = [{\n\t\t\t\tkey: \"High\",\n\t\t\t\ty: sumHigh\n\t\t\t}, {\n\t\t\t\tkey: \"Low\",\n\t\t\t\ty: sumLow\n\t\t\t}];\n\n\t\t\td3.select('#chartFavPie svg')\n\t\t\t    .datum(data)\n\t\t\t\t\t.transition().duration(1200)\n\t\t\t\t\t.attr('width', width)\n\t\t\t\t\t.attr('height', height)\n\t\t\t\t\t.call(chart);\n\n\t\t\tchart.update();\n\t\t});\n}\n"]},"hash":"7971ab11e43565a3b702a2fc46037a04cb587f43"}
