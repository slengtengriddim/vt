{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/views/high/index/charts/words/chart_words_user.js","filenameRelative":"/client/views/high/index/charts/words/chart_words_user.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/views/high/index/charts/words/chart_words_user.js.map","sourceFileName":"/client/views/high/index/charts/words/chart_words_user.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"chart_words_user"},"ignored":false,"code":"Template.chartWordsAll.onCreated(function () {\n\tvar template = Template.instance();\n\ttemplate.subscribe('dataViewedUser');\n\ttemplate.subscribe('dataViewedAll');\n});\n\nTemplate.chartWordsUser.rendered = function () {\n\n\t// chart object\n\tvar chart = nv.models.discreteBarChart().x(function (d) {\n\t\treturn d.vocabularyName;\n\t}).y(function (d) {\n\t\treturn d.timesViewed;\n\t}).staggerLabels(true)\n\t//.staggerLabels(historicalBarChart[0].values.length > 8)\n\t.showValues(true).duration(250);\n\n\t// chart details\n\tnv.addGraph(function () {\n\t\tvar userId = Meteor.userId();\n\t\tvar dataUser = Data.Viewed.User.find({ userId: userId }, {\n\t\t\tsort: {\n\t\t\t\ttimesViewed: -1\n\t\t\t}\n\t\t}).fetch();\n\t\tvar dataAll = Data.Viewed.All.find({}, {\n\t\t\tsort: {\n\t\t\t\ttimesViewed: -1\n\t\t\t}\n\t\t}).fetch();\n\n\t\tvar barChart = [{\n\t\t\tkey: \"Top 5 beliebte Woerter (Benutzer)\",\n\t\t\tvalues: dataUser\n\t\t}, {\n\t\t\tkey: \"Top 5 beliebte Woerter (Alle)\",\n\t\t\tvalues: dataAll\n\t\t}];\n\n\t\td3.select('#chartWordsUser svg').datum(barChart).call(chart);\n\n\t\tnv.utils.windowResize(chart.update);\n\n\t\treturn chart;\n\t});\n\n\t// update chart when data changes\n\tthis.autorun(function () {\n\t\tvar userId = Meteor.userId();\n\t\tvar dataUser = Data.Viewed.User.find({ userId: userId }, {\n\t\t\tsort: {\n\t\t\t\ttimesViewed: -1\n\t\t\t}\n\t\t}).fetch();\n\t\tvar dataAll = Data.Viewed.All.find({}, {\n\t\t\tsort: {\n\t\t\t\ttimesViewed: -1\n\t\t\t}\n\t\t}).fetch();\n\n\t\tvar barChart = [{\n\t\t\tkey: \"Top 5 beliebte Woerter (Benutzer)\",\n\t\t\tvalues: dataUser\n\t\t}, {\n\t\t\tkey: \"Top 5 beliebte Woerter (Alle)\",\n\t\t\tvalues: dataAll\n\t\t}];\n\n\t\td3.select('#chartWordsUser svg').datum(barChart).call(chart);\n\n\t\tchart.update();\n\t});\n};\n\n// data = Data.Viewed.find({}, {\n//     limit: 5,\n//     sort: {\n//         timesViewed: -1\n//     }\n// });","ast":null,"map":{"version":3,"sources":["/client/views/high/index/charts/words/chart_words_user.js"],"names":[],"mappings":"AAAA,SAAS,aAAT,CAAuB,SAAvB,CAAiC,YAAM;AACnC,KAAI,WAAW,SAAS,QAAT,EAAX,CAD+B;AAEtC,UAAS,SAAT,CAAmB,gBAAnB,EAFsC;AAGtC,UAAS,SAAT,CAAmB,eAAnB,EAHsC;CAAN,CAAjC;;AAMA,SAAS,cAAT,CAAwB,QAAxB,GAAmC,YAAW;;;AAG7C,KAAI,QAAQ,GAAG,MAAH,CAAU,gBAAV,GACV,CADU,CACR,UAAS,CAAT,EAAY;AACd,SAAO,EAAE,cAAF,CADO;EAAZ,CADQ,CAIV,CAJU,CAIR,UAAS,CAAT,EAAY;AACd,SAAO,EAAE,WAAF,CADO;EAAZ,CAJQ,CAOV,aAPU,CAOI,IAPJ;;EASV,UATU,CASC,IATD,EAUV,QAVU,CAUD,GAVC,CAAR;;;AAHyC,GAgB7C,CAAG,QAAH,CAAY,YAAW;AACtB,MAAI,SAAS,OAAO,MAAP,EAAT,CADkB;AAEtB,MAAI,WAAW,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAsB,EAAC,QAAQ,MAAR,EAAvB,EAAwC;AACtD,SAAM;AACL,iBAAa,CAAC,CAAD;IADd;GADc,EAIZ,KAJY,EAAX,CAFkB;AAOtB,MAAI,UAAU,KAAK,MAAL,CAAY,GAAZ,CAAgB,IAAhB,CAAqB,EAArB,EAAyB;AACtC,SAAM;AACL,iBAAa,CAAC,CAAD;IADd;GADa,EAIX,KAJW,EAAV,CAPkB;;AAatB,MAAI,WAAW,CAAC;AACf,QAAK,mCAAL;AACA,WAAQ,QAAR;GAFc,EAIf;AACC,QAAK,+BAAL;AACA,WAAQ,OAAR;GANc,CAAX,CAbkB;;AAsBtB,KAAG,MAAH,CAAU,qBAAV,EACE,KADF,CACQ,QADR,EAEE,IAFF,CAEO,KAFP,EAtBsB;;AA0BtB,KAAG,KAAH,CAAS,YAAT,CAAsB,MAAM,MAAN,CAAtB,CA1BsB;;AA4BtB,SAAO,KAAP,CA5BsB;EAAX,CAAZ;;;AAhB6C,KAgD7C,CAAK,OAAL,CAAa,YAAW;AACvB,MAAI,SAAS,OAAO,MAAP,EAAT,CADmB;AAEvB,MAAI,WAAW,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAsB,EAAC,QAAQ,MAAR,EAAvB,EAAwC;AACtD,SAAM;AACL,iBAAa,CAAC,CAAD;IADd;GADc,EAIZ,KAJY,EAAX,CAFmB;AAOvB,MAAI,UAAU,KAAK,MAAL,CAAY,GAAZ,CAAgB,IAAhB,CAAqB,EAArB,EAAyB;AACtC,SAAM;AACL,iBAAa,CAAC,CAAD;IADd;GADa,EAIX,KAJW,EAAV,CAPmB;;AAavB,MAAI,WAAW,CAAC;AACf,QAAK,mCAAL;AACA,WAAQ,QAAR;GAFc,EAIf;AACC,QAAK,+BAAL;AACA,WAAQ,OAAR;GANc,CAAX,CAbmB;;AAsBvB,KAAG,MAAH,CAAU,qBAAV,EACE,KADF,CACQ,QADR,EAEE,IAFF,CAEO,KAFP,EAtBuB;;AA0BvB,QAAM,MAAN,GA1BuB;EAAX,CAAb,CAhD6C;CAAX","file":"/client/views/high/index/charts/words/chart_words_user.js.map","sourcesContent":["Template.chartWordsAll.onCreated(() => {\n    let template = Template.instance();\n\ttemplate.subscribe('dataViewedUser');\n\ttemplate.subscribe('dataViewedAll');\n});\n\nTemplate.chartWordsUser.rendered = function() {\n\n\t// chart object\n\tlet chart = nv.models.discreteBarChart()\n\t\t.x(function(d) {\n\t\t\treturn d.vocabularyName\n\t\t})\n\t\t.y(function(d) {\n\t\t\treturn d.timesViewed\n\t\t})\n\t\t.staggerLabels(true)\n\t\t//.staggerLabels(historicalBarChart[0].values.length > 8)\n\t\t.showValues(true)\n\t\t.duration(250);\n\n\t// chart details\n\tnv.addGraph(function() {\n\t\tlet userId = Meteor.userId();\n\t\tlet dataUser = Data.Viewed.User.find({userId: userId}, {\n\t\t\tsort: {\n\t\t\t\ttimesViewed: -1\n\t\t\t}\n\t\t}).fetch();\n\t\tlet dataAll = Data.Viewed.All.find({}, {\n\t\t\tsort: {\n\t\t\t\ttimesViewed: -1\n\t\t\t}\n\t\t}).fetch();\n\n\t\tlet barChart = [{\n\t\t\tkey: \"Top 5 beliebte Woerter (Benutzer)\",\n\t\t\tvalues: dataUser\n\t\t},\n\t\t{\n\t\t\tkey: \"Top 5 beliebte Woerter (Alle)\",\n\t\t\tvalues: dataAll\n\t\t}];\n\n\t\td3.select('#chartWordsUser svg')\n\t\t\t.datum(barChart)\n\t\t\t.call(chart);\n\n\t\tnv.utils.windowResize(chart.update);\n\n\t\treturn chart;\n\t});\n\n\t// update chart when data changes\n\tthis.autorun(function() {\n\t\tlet userId = Meteor.userId();\n\t\tlet dataUser = Data.Viewed.User.find({userId: userId}, {\n\t\t\tsort: {\n\t\t\t\ttimesViewed: -1\n\t\t\t}\n\t\t}).fetch();\n\t\tlet dataAll = Data.Viewed.All.find({}, {\n\t\t\tsort: {\n\t\t\t\ttimesViewed: -1\n\t\t\t}\n\t\t}).fetch();\n\n\t\tlet barChart = [{\n\t\t\tkey: \"Top 5 beliebte Woerter (Benutzer)\",\n\t\t\tvalues: dataUser\n\t\t},\n\t\t{\n\t\t\tkey: \"Top 5 beliebte Woerter (Alle)\",\n\t\t\tvalues: dataAll\n\t\t}];\n\n\t\td3.select('#chartWordsUser svg')\n\t\t\t.datum(barChart)\n\t\t\t.call(chart);\n\n\t\tchart.update();\n\t});\n\n};\n\n\n// data = Data.Viewed.find({}, {\n//     limit: 5,\n//     sort: {\n//         timesViewed: -1\n//     }\n// });\n"]},"hash":"67010c50009d0cf8f7c50157150b84eb5906c67b"}
