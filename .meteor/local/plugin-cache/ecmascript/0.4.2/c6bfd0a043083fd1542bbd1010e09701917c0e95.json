{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/views/high/index/charts/chart_words_all.js","filenameRelative":"/client/views/high/index/charts/chart_words_all.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/views/high/index/charts/chart_words_all.js.map","sourceFileName":"/client/views/high/index/charts/chart_words_all.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"chart_words_all"},"ignored":false,"code":"Template.chartWordsAll.onCreated(function () {\n\tvar template = Template.instance();\n\ttemplate.subscribe('dataWords');\n});\n\nTemplate.chartWordsAll.rendered = function () {\n\n\tvar barChart = function barChart() {\n\t\tvar result = [];\n\t\tvar data = Data.Words.find({}).fetch();\n\n\t\tvar byVocabularyId = R.groupBy(function (entry) {\n\t\t\treturn entry.vocabularyId;\n\t\t});\n\n\t\tvar groupedByVocabularyId = byVocabularyId(data);\n\t\tfor (var k in meteorBabelHelpers.sanitizeForInObject(groupedByVocabularyId)) {\n\t\t\tif (groupedByVocabularyId.hasOwnProperty(k)) {\n\t\t\t\tresult.push({\n\t\t\t\t\tx: groupedByVocabularyId[k][0].vocabularyName,\n\t\t\t\t\ty: R.sum(R.pluck('viewed')(groupedByVocabularyId[k]))\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tvar sortByViewed = R.sortBy(R.prop('y'));\n\t\tresult = R.take(5, R.reverse(sortByViewed(result)));\n\n\t\tvar barChart = [{\n\t\t\tkey: \"Top 5 beliebte Woerter (allgemein)\",\n\t\t\tvalues: result\n\t\t}];\n\n\t\treturn barChart;\n\t};\n\n\t// chart object\n\tvar chart = nv.models.discreteBarChart().x(function (d) {\n\t\treturn d.x;\n\t}).y(function (d) {\n\t\treturn d.y;\n\t}).staggerLabels(true)\n\t//.staggerLabels(historicalBarChart[0].values.length > 8)\n\t.showValues(false).showYAxis(false).duration(250);\n\n\t// chart details\n\tnv.addGraph(function () {\n\t\td3.select('#chartWordsAll svg').datum(barChart()).call(chart);\n\n\t\tnv.utils.windowResize(chart.update);\n\n\t\treturn chart;\n\t});\n\n\t// update chart when data changes\n\tthis.autorun(function () {\n\t\td3.select('#chartWordsAll svg').datum(barChart()).call(chart);\n\n\t\tchart.update();\n\t});\n};","ast":null,"map":{"version":3,"sources":["/client/views/high/index/charts/chart_words_all.js"],"names":[],"mappings":"AAAA,SAAS,aAAT,CAAuB,SAAvB,CAAiC,YAAM;AACtC,KAAI,WAAW,SAAS,QAAT,EAAX,CADkC;AAEtC,UAAS,SAAT,CAAmB,WAAnB,EAFsC;CAAN,CAAjC;;AAKA,SAAS,aAAT,CAAuB,QAAvB,GAAkC,YAAW;;AAE5C,KAAI,WAAW,oBAAM;AACpB,MAAI,SAAS,EAAT,CADgB;AAEpB,MAAI,OAAO,KAAK,KAAL,CAAW,IAAX,CAAgB,EAAhB,EAAoB,KAApB,EAAP,CAFgB;;AAIpB,MAAI,iBAAiB,EAAE,OAAF,CAAU,UAAS,KAAT,EAAgB;AAC9C,UAAO,MAAM,YAAN,CADuC;GAAhB,CAA3B,CAJgB;;AAQpB,MAAI,wBAAwB,eAAe,IAAf,CAAxB,CARgB;AASpB,OAAK,IAAI,CAAJ,2CAAS,sBAAd,EAAqC;AACpC,OAAI,sBAAsB,cAAtB,CAAqC,CAArC,CAAJ,EAA6C;AAC5C,WAAO,IAAP,CAAY;AACX,QAAG,sBAAsB,CAAtB,EAAyB,CAAzB,EAA4B,cAA5B;AACH,QAAG,EAAE,GAAF,CAAM,EAAE,KAAF,CAAQ,QAAR,EAAkB,sBAAsB,CAAtB,CAAlB,CAAN,CAAH;KAFD,EAD4C;IAA7C;GADD,CAToB;AAiBpB,MAAI,eAAe,EAAE,MAAF,CAAS,EAAE,IAAF,CAAO,GAAP,CAAT,CAAf,CAjBgB;AAkBpB,WAAS,EAAE,IAAF,CAAO,CAAP,EAAU,EAAE,OAAF,CAAU,aAAa,MAAb,CAAV,CAAV,CAAT,CAlBoB;;AAqBpB,MAAI,WAAW,CAAC;AACf,QAAK,oCAAL;AACA,WAAQ,MAAR;GAFc,CAAX,CArBgB;;AA0BpB,SAAO,QAAP,CA1BoB;EAAN;;;AAF6B,KAgCxC,QAAQ,GAAG,MAAH,CAAU,gBAAV,GACV,CADU,CACR,UAAS,CAAT,EAAY;AACd,SAAO,EAAE,CAAF,CADO;EAAZ,CADQ,CAIV,CAJU,CAIR,UAAS,CAAT,EAAY;AACd,SAAO,EAAE,CAAF,CADO;EAAZ,CAJQ,CAOV,aAPU,CAOI,IAPJ;;EASV,UATU,CASC,KATD,EAUV,SAVU,CAUA,KAVA,EAWV,QAXU,CAWD,GAXC,CAAR;;;AAhCwC,GA8C5C,CAAG,QAAH,CAAY,YAAW;AACtB,KAAG,MAAH,CAAU,oBAAV,EACE,KADF,CACQ,UADR,EAEE,IAFF,CAEO,KAFP,EADsB;;AAKtB,KAAG,KAAH,CAAS,YAAT,CAAsB,MAAM,MAAN,CAAtB,CALsB;;AAOtB,SAAO,KAAP,CAPsB;EAAX,CAAZ;;;AA9C4C,KAyD5C,CAAK,OAAL,CAAa,YAAW;AACvB,KAAG,MAAH,CAAU,oBAAV,EACE,KADF,CACQ,UADR,EAEE,IAFF,CAEO,KAFP,EADuB;;AAKvB,QAAM,MAAN,GALuB;EAAX,CAAb,CAzD4C;CAAX","file":"/client/views/high/index/charts/chart_words_all.js.map","sourcesContent":["Template.chartWordsAll.onCreated(() => {\n\tlet template = Template.instance();\n\ttemplate.subscribe('dataWords');\n});\n\nTemplate.chartWordsAll.rendered = function() {\n\n\tlet barChart = () => {\n\t\tlet result = [];\n\t\tlet data = Data.Words.find({}).fetch();\n\n\t\tlet byVocabularyId = R.groupBy(function(entry) {\n\t\t\treturn entry.vocabularyId;\n\t\t});\n\n\t\tlet groupedByVocabularyId = byVocabularyId(data);\n\t\tfor (let k in groupedByVocabularyId) {\n\t\t\tif (groupedByVocabularyId.hasOwnProperty(k)) {\n\t\t\t\tresult.push({\n\t\t\t\t\tx: groupedByVocabularyId[k][0].vocabularyName,\n\t\t\t\t\ty: R.sum(R.pluck('viewed')(groupedByVocabularyId[k]))\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tlet sortByViewed = R.sortBy(R.prop('y'));\n\t\tresult = R.take(5, R.reverse(sortByViewed(result)));\n\n\n\t\tlet barChart = [{\n\t\t\tkey: \"Top 5 beliebte Woerter (allgemein)\",\n\t\t\tvalues: result\n\t\t}];\n\n\t\treturn barChart;\n\t};\n\n\t// chart object\n\tlet chart = nv.models.discreteBarChart()\n\t\t.x(function(d) {\n\t\t\treturn d.x\n\t\t})\n\t\t.y(function(d) {\n\t\t\treturn d.y\n\t\t})\n\t\t.staggerLabels(true)\n\t\t//.staggerLabels(historicalBarChart[0].values.length > 8)\n\t\t.showValues(false)\n\t\t.showYAxis(false)\n\t\t.duration(250);\n\n\t// chart details\n\tnv.addGraph(function() {\n\t\td3.select('#chartWordsAll svg')\n\t\t\t.datum(barChart())\n\t\t\t.call(chart);\n\n\t\tnv.utils.windowResize(chart.update);\n\n\t\treturn chart;\n\t});\n\n\t// update chart when data changes\n\tthis.autorun(function() {\n\t\td3.select('#chartWordsAll svg')\n\t\t\t.datum(barChart())\n\t\t\t.call(chart);\n\n\t\tchart.update();\n\t});\n\n};\n"]},"hash":"c6bfd0a043083fd1542bbd1010e09701917c0e95"}
