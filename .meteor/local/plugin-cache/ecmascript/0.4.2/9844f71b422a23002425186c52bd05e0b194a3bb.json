{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/views/high/stats/charts/chart_pie_attention.js","filenameRelative":"/client/views/high/stats/charts/chart_pie_attention.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/views/high/stats/charts/chart_pie_attention.js.map","sourceFileName":"/client/views/high/stats/charts/chart_pie_attention.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"chart_pie_attention"},"ignored":false,"code":"Template.chartPieAttention.onCreated(function () {\n\tvar template = Template.instance();\n\ttemplate.subscribe('dataFavHigh');\n\ttemplate.subscribe('dataFavLow');\n\ttemplate.subscribe('dataDetail');\n});\n\n// let sumLow = R.sum(R.pluck('y')(Data.Fav.Low.find({}).fetch()));\n// let sumHigh = R.sum(R.pluck('y')(Data.Fav.High.find({}).fetch()));\n// let data = [{\n// \tkey: \"High\",\n// \ty: sumHigh\n// }, {\n// \tkey: \"Low\",\n// \ty: sumLow\n// }];\n\nTemplate.chartPieAttention.rendered = function () {\n\n\tvar data = function data() {\n\t\tvar dataRaw = Data.Detail.find({});\n\n\t\tvar byAttention = R.groupBy(function (entry) {\n\t\t\treturn entry.attention;\n\t\t});\n\n\t\tvar sumLow = Data.Detail.find({ attention: true }).count();\n\t\tvar sumHigh = Data.Detail.find({ attention: true }).count();\n\n\t\tconsole.log(sumLow);\n\t\tconsole.log(sumHigh);\n\n\t\t// let sumLow = R.prop('true', R.map(R.length, byAttention(dataRaw.fetch())));\n\t\t// let sumHigh = R.prop('false', R.map(R.length, byAttention(dataRaw.fetch())));\n\n\t\t// let sumLow = R.sum(R.pluck('y')(Data.Fav.Low.find({}).fetch()));\n\t\t// let sumHigh = R.sum(R.pluck('y')(Data.Fav.High.find({}).fetch()));\n\n\t\tvar data = [{\n\t\t\tkey: \"High\",\n\t\t\ty: sumHigh\n\t\t}, {\n\t\t\tkey: \"Low\",\n\t\t\ty: sumLow\n\t\t}];\n\t\t//\n\t\t// console.log(data);\n\n\t\treturn data;\n\t};\n\n\tconsole.log(data);\n\n\tvar height = 350;\n\tvar width = 350;\n\t// chart object\n\tvar chart = nv.models.pieChart().x(function (d) {\n\t\treturn d.key;\n\t}).y(function (d) {\n\t\treturn d.y;\n\t}).width(width).height(height);\n\n\t// chart details\n\tnv.addGraph(function () {\n\t\t// let sumLow = R.sum(R.pluck('y')(Data.Fav.Low.find({}).fetch()));\n\t\t// let sumHigh = R.sum(R.pluck('y')(Data.Fav.High.find({}).fetch()));\n\n\t\td3.select('#chartPieAttention svg').datum(data()).transition().duration(1200).attr('width', width).attr('height', height).call(chart);\n\n\t\t// nv.utils.windowResize(chart.update);\n\n\t\treturn chart;\n\t});\n\n\t// update chart when data changes\n\tthis.autorun(function () {\n\n\t\tconsole.log(data());\n\n\t\td3.select('#chartPieAttention svg').datum(data()).transition().duration(1200).attr('width', width).attr('height', height).call(chart);\n\n\t\tchart.update();\n\t});\n};","ast":null,"map":{"version":3,"sources":["/client/views/high/stats/charts/chart_pie_attention.js"],"names":[],"mappings":"AAAA,SAAS,iBAAT,CAA2B,SAA3B,CAAqC,YAAM;AAC1C,KAAI,WAAW,SAAS,QAAT,EAAX,CADsC;AAE1C,UAAS,SAAT,CAAmB,aAAnB,EAF0C;AAG1C,UAAS,SAAT,CAAmB,YAAnB,EAH0C;AAI1C,UAAS,SAAT,CAAmB,YAAnB,EAJ0C;CAAN,CAArC;;;;;;;;;;;;AAqBA,SAAS,iBAAT,CAA2B,QAA3B,GAAsC,YAAW;;AAEhD,KAAI,OAAO,gBAAM;AAChB,MAAI,UAAU,KAAK,MAAL,CAAY,IAAZ,CAAiB,EAAjB,CAAV,CADY;;AAIhB,MAAI,cAAc,EAAE,OAAF,CAAU,UAAS,KAAT,EAAgB;AAC3C,UAAO,MAAM,SAAN,CADoC;GAAhB,CAAxB,CAJY;;AAQhB,MAAI,SAAS,KAAK,MAAL,CAAY,IAAZ,CAAiB,EAAC,WAAW,IAAX,EAAlB,EAAoC,KAApC,EAAT,CARY;AAShB,MAAI,UAAU,KAAK,MAAL,CAAY,IAAZ,CAAiB,EAAC,WAAW,IAAX,EAAlB,EAAoC,KAApC,EAAV,CATY;;AAWhB,UAAQ,GAAR,CAAY,MAAZ,EAXgB;AAYhB,UAAQ,GAAR,CAAY,OAAZ;;;;;;;;AAZgB,MAoBZ,OAAO,CAAC;AACX,QAAK,MAAL;AACA,MAAG,OAAH;GAFU,EAGR;AACF,QAAK,KAAL;AACA,MAAG,MAAH;GALU,CAAP;;;;AApBY,SA8BT,IAAP,CA9BgB;EAAN,CAFqC;;AAmCjD,SAAQ,GAAR,CAAY,IAAZ,EAnCiD;;AAqChD,KAAI,SAAS,GAAT,CArC4C;AAsChD,KAAI,QAAQ,GAAR;;AAtC4C,KAwC5C,QAAQ,GAAG,MAAH,CAAU,QAAV,GACV,CADU,CACR,UAAS,CAAT,EAAY;AACd,SAAO,EAAE,GAAF,CADO;EAAZ,CADQ,CAIV,CAJU,CAIR,UAAS,CAAT,EAAY;AACd,SAAO,EAAE,CAAF,CADO;EAAZ,CAJQ,CAOV,KAPU,CAOJ,KAPI,EAQV,MARU,CAQH,MARG,CAAR;;;AAxC4C,GAmDhD,CAAG,QAAH,CAAY,YAAW;;;;AAItB,KAAG,MAAH,CAAU,wBAAV,EACE,KADF,CACQ,MADR,EAEE,UAFF,GAEe,QAFf,CAEwB,IAFxB,EAGE,IAHF,CAGO,OAHP,EAGgB,KAHhB,EAIE,IAJF,CAIO,QAJP,EAIiB,MAJjB,EAKE,IALF,CAKO,KALP;;;;AAJsB,SAcf,KAAP,CAdsB;EAAX,CAAZ;;;AAnDgD,KAqEhD,CAAK,OAAL,CAAa,YAAW;;AAEvB,UAAQ,GAAR,CAAY,MAAZ,EAFuB;;AAIvB,KAAG,MAAH,CAAU,wBAAV,EACE,KADF,CACQ,MADR,EAEE,UAFF,GAEe,QAFf,CAEwB,IAFxB,EAGE,IAHF,CAGO,OAHP,EAGgB,KAHhB,EAIE,IAJF,CAIO,QAJP,EAIiB,MAJjB,EAKE,IALF,CAKO,KALP,EAJuB;;AAWvB,QAAM,MAAN,GAXuB;EAAX,CAAb,CArEgD;CAAX","file":"/client/views/high/stats/charts/chart_pie_attention.js.map","sourcesContent":["Template.chartPieAttention.onCreated(() => {\n\tlet template = Template.instance();\n\ttemplate.subscribe('dataFavHigh');\n\ttemplate.subscribe('dataFavLow');\n\ttemplate.subscribe('dataDetail');\n});\n\n\n// let sumLow = R.sum(R.pluck('y')(Data.Fav.Low.find({}).fetch()));\n// let sumHigh = R.sum(R.pluck('y')(Data.Fav.High.find({}).fetch()));\n// let data = [{\n// \tkey: \"High\",\n// \ty: sumHigh\n// }, {\n// \tkey: \"Low\",\n// \ty: sumLow\n// }];\n\n\n\n\nTemplate.chartPieAttention.rendered = function() {\n\n\tvar data = () => {\n\t\tlet dataRaw = Data.Detail.find({});\n\n\n\t\tlet byAttention = R.groupBy(function(entry) {\n\t\t\treturn entry.attention;\n\t\t});\n\n\t\tlet sumLow = Data.Detail.find({attention: true}).count();\n\t\tlet sumHigh = Data.Detail.find({attention: true}).count();\n\n\t\tconsole.log(sumLow);\n\t\tconsole.log(sumHigh);\n\n\t\t// let sumLow = R.prop('true', R.map(R.length, byAttention(dataRaw.fetch())));\n\t\t// let sumHigh = R.prop('false', R.map(R.length, byAttention(dataRaw.fetch())));\n\n\t\t// let sumLow = R.sum(R.pluck('y')(Data.Fav.Low.find({}).fetch()));\n\t\t// let sumHigh = R.sum(R.pluck('y')(Data.Fav.High.find({}).fetch()));\n\n\t\tlet data = [{\n\t\t\tkey: \"High\",\n\t\t\ty: sumHigh\n\t\t}, {\n\t\t\tkey: \"Low\",\n\t\t\ty: sumLow\n\t\t}];\n\t\t//\n\t\t// console.log(data);\n\n\t\treturn data;\n\t};\n\nconsole.log(data);\n\n\tvar height = 350;\n\tvar width = 350;\n\t// chart object\n\tvar chart = nv.models.pieChart()\n\t\t.x(function(d) {\n\t\t\treturn d.key\n\t\t})\n\t\t.y(function(d) {\n\t\t\treturn d.y\n\t\t})\n\t\t.width(width)\n\t\t.height(height);\n\n\t// chart details\n\tnv.addGraph(function() {\n\t\t// let sumLow = R.sum(R.pluck('y')(Data.Fav.Low.find({}).fetch()));\n\t\t// let sumHigh = R.sum(R.pluck('y')(Data.Fav.High.find({}).fetch()));\n\n\t\td3.select('#chartPieAttention svg')\n\t\t\t.datum(data())\n\t\t\t.transition().duration(1200)\n\t\t\t.attr('width', width)\n\t\t\t.attr('height', height)\n\t\t\t.call(chart);\n\n\n\t\t// nv.utils.windowResize(chart.update);\n\n\t\treturn chart;\n\t});\n\n\t// update chart when data changes\n\tthis.autorun(function() {\n\n\t\tconsole.log(data());\n\n\t\td3.select('#chartPieAttention svg')\n\t\t\t.datum(data())\n\t\t\t.transition().duration(1200)\n\t\t\t.attr('width', width)\n\t\t\t.attr('height', height)\n\t\t\t.call(chart);\n\n\t\tchart.update();\n\t});\n}\n"]},"hash":"9844f71b422a23002425186c52bd05e0b194a3bb"}
