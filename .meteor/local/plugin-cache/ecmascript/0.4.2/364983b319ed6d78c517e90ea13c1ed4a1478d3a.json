{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/layout/layout.js","filenameRelative":"/client/layout/layout.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/layout/layout.js.map","sourceFileName":"/client/layout/layout.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"layout"},"ignored":false,"code":"Template.layout.onCreated(function () {\n\tthis.autorun(function () {\n\n\t\tSession.set(LENGTH_FAV, Favourites.find().count());\n\t\tSession.set(LENGTH_NOT_FAV, Vocabulary.find().count() - Favourites.find().count());\n\t});\n});\n\nTemplate.layout.events({\n\t'click .btn-forward, click .btn-backward': function () {\n\t\tfunction clickBtnForwardClickBtnBackward(event, template) {\n\n\t\t\tvar self = this;\n\t\t\tif (Session.get(REVEALED)) {\n\t\t\t\tSession.set(REVEALED, false);\n\t\t\t}\n\t\t\tif (Session.get(TERM_WRONG)) {\n\t\t\t\tSession.set(TERM_WRONG, false);\n\t\t\t}\n\t\t\tif (document.getElementById(\"term\")) {\n\t\t\t\tdocument.getElementById(\"term\").value = '';\n\t\t\t\tif (document.getElementById(\"term\").disabled === true) {\n\t\t\t\t\tdocument.getElementById(\"term\").disabled = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// log\n\t\t\tMeteor.call('dataViewedUser', self);\n\t\t\tMeteor.call('dataViewedAll', self);\n\n\t\t\tvar deviceType = Darwin.device.type;\n\t\t\tvar devicePlatform = Darwin.device.platform;\n\t\t\t// ['favDel', 'browse', 'favNotFav']\n\t\t\tvar clickArea = 'browse';\n\t\t\t// ['lesen', 'wort', 'definition', 'eingabe']\n\t\t\tvar mode = void 0;\n\t\t\tvar attention = Session.get(ATTENTION_MODE);\n\t\t\tif (Session.get(ATTENTION_MODE)) {\n\t\t\t\tmode = Session.get(NAV_MODES)[Session.get(NAV_MODE_COUNT)];\n\t\t\t} else {\n\t\t\t\tmode = 'eingabe';\n\t\t\t}\n\t\t\tMeteor.call('dataDetail', deviceType, devicePlatform, clickArea, mode, attention);\n\t\t}\n\n\t\treturn clickBtnForwardClickBtnBackward;\n\t}(),\n\t'click .btn-backward': function () {\n\t\tfunction clickBtnBackward(event, template) {\n\t\t\tvar val = 0;\n\t\t\tif (Session.get(SOURCE_FAV)) {\n\t\t\t\t// reset to avoid going into negative numbers and be able to circle backwards\n\t\t\t\tif (Session.get(COUNT_VIEWED) === 0) {\n\t\t\t\t\tval = Session.get(LENGTH_FAV) - 1;\n\t\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t\t} else {\n\t\t\t\t\tval = (Session.get(COUNT_VIEWED) - 1) % Session.get(LENGTH_FAV);\n\t\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (Session.get(COUNT_VIEWED) === 0) {\n\t\t\t\t\tval = Session.get(LENGTH_NOT_FAV) - 1;\n\t\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t\t} else {\n\t\t\t\t\tval = (Session.get(COUNT_VIEWED) - 1) % Session.get(LENGTH_NOT_FAV);\n\t\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn clickBtnBackward;\n\t}(),\n\t'click .btn-forward': function () {\n\t\tfunction clickBtnForward(event, template) {\n\t\t\tvar val = 0;\n\t\t\tif (Session.get(SOURCE_FAV)) {\n\t\t\t\tval = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_FAV);\n\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t} else {\n\t\t\t\tval = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_NOT_FAV);\n\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t}\n\t\t}\n\n\t\treturn clickBtnForward;\n\t}(),\n\t'click .btn-reveal': function () {\n\t\tfunction clickBtnReveal(event, template) {\n\t\t\tif (!Session.get(REVEALED)) {\n\t\t\t\tSession.set(REVEALED, true);\n\t\t\t}\n\t\t\tif (document.getElementById(\"term\")) {\n\t\t\t\tif (document.getElementById(\"term\").disabled === false) {\n\t\t\t\t\tdocument.getElementById(\"term\").disabled = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// log\n\t\t\tvar deviceType = Darwin.device.type;\n\t\t\tvar devicePlatform = Darwin.device.platform;\n\t\t\t// ['favDel', 'browse', 'favNotFav', 'reveal']\n\t\t\tvar clickArea = 'reveal';\n\t\t\t// ['lesen', 'wort', 'definition', 'eingabe']\n\t\t\tvar mode = void 0;\n\t\t\tvar attention = Session.get(ATTENTION_MODE);\n\t\t\tif (Session.get(ATTENTION_MODE)) {\n\t\t\t\tmode = Session.get(NAV_MODES)[Session.get(NAV_MODE_COUNT)];\n\t\t\t} else {\n\t\t\t\tmode = 'eingabe';\n\t\t\t}\n\t\t\tMeteor.call('dataDetail', deviceType, devicePlatform, clickArea, mode, attention);\n\t\t}\n\n\t\treturn clickBtnReveal;\n\t}(),\n\t'click .btn-insert, click .btn-delete': function () {\n\t\tfunction clickBtnInsertClickBtnDelete(event, template) {\n\t\t\tvar deviceType = Darwin.device.type;\n\t\t\tvar devicePlatform = Darwin.device.platform;\n\t\t\t// ['favDel', 'browse', 'favNotFav']\n\t\t\tvar clickArea = 'favDel';\n\t\t\t// ['lesen', 'wort', 'definition', 'eingabe']\n\t\t\tvar mode = void 0;\n\t\t\tvar attention = Session.get(ATTENTION_MODE);\n\t\t\tif (Session.get(ATTENTION_MODE)) {\n\t\t\t\tmode = Session.get(NAV_MODES)[Session.get(NAV_MODE_COUNT)];\n\t\t\t} else {\n\t\t\t\tmode = 'eingabe';\n\t\t\t}\n\t\t\tMeteor.call('dataDetail', deviceType, devicePlatform, clickArea, mode, attention);\n\t\t}\n\n\t\treturn clickBtnInsertClickBtnDelete;\n\t}(),\n\t'click .btn-insert': function () {\n\t\tfunction clickBtnInsert(event, template) {\n\t\t\tvar self = this;\n\t\t\tvar group = FlowRouter.current().route.group.name;\n\t\t\t// log start\n\t\t\tvar timestamp = new Date();\n\t\t\ttimestamp.setHours(0);\n\t\t\ttimestamp.setMinutes(0);\n\t\t\ttimestamp.setSeconds(0);\n\t\t\ttimestamp.setMilliseconds(0);\n\n\t\t\tif (group === 'high') {\n\t\t\t\tMeteor.call('dataFavHigh', timestamp.getTime());\n\t\t\t}\n\t\t\tif (group === 'low') {\n\t\t\t\tMeteor.call('dataFavLow', timestamp.getTime());\n\t\t\t}\n\t\t\t// log end\n\t\t\tMeteor.call('insertFavourite', self._id);\n\t\t\t// simulate source mode button for register page\n\t\t\tif (!Session.get(ATTENTION_MODE)) {\n\t\t\t\tSession.set(SOURCE_FAV, false);\n\t\t\t}\n\n\t\t\t// reset the COUNT VIEW when a list entry has been removed\n\t\t\tif (!Session.get(SOURCE_FAV) && Session.get(COUNT_VIEWED) >= Session.get(LENGTH_NOT_FAV) - 1) {\n\t\t\t\tvar val = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_NOT_FAV);\n\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t}\n\t\t\tif (Session.get(LENGTH_NOT_FAV) === 1) {\n\t\t\t\tSession.set(SOURCE_FAV, !Session.get(SOURCE_FAV));\n\t\t\t}\n\t\t}\n\n\t\treturn clickBtnInsert;\n\t}(),\n\t'click .btn-delete': function () {\n\t\tfunction clickBtnDelete(event, template) {\n\t\t\tvar self = this;\n\t\t\tvar group = FlowRouter.current().route.group.name;\n\t\t\t// log start\n\t\t\tvar timestamp = new Date();\n\t\t\ttimestamp.setHours(0);\n\t\t\ttimestamp.setMinutes(0);\n\t\t\ttimestamp.setSeconds(0);\n\t\t\ttimestamp.setMilliseconds(0);\n\n\t\t\tif (group === 'high') {\n\t\t\t\tMeteor.call('dataFavHigh', timestamp.getTime());\n\t\t\t}\n\t\t\tif (group === 'low') {\n\t\t\t\tMeteor.call('dataFavLow', timestamp.getTime());\n\t\t\t}\n\t\t\t// log end\n\n\t\t\tMeteor.call('deleteFavourite', self._id);\n\t\t\t// simulate source mode button for register page\n\t\t\tif (!Session.get(ATTENTION_MODE)) {\n\t\t\t\tSession.set(SOURCE_FAV, true);\n\t\t\t}\n\n\t\t\tif (Session.get(SOURCE_FAV) && Session.get(COUNT_VIEWED) >= Session.get(LENGTH_FAV) - 1) {\n\t\t\t\tvar val = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_FAV);\n\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t}\n\t\t\tif (Session.get(LENGTH_FAV) === 1) {\n\t\t\t\tSession.set(SOURCE_FAV, !Session.get(SOURCE_FAV));\n\t\t\t}\n\t\t}\n\n\t\treturn clickBtnDelete;\n\t}()\n});","ast":null,"map":{"version":3,"sources":["/client/layout/layout.js"],"names":[],"mappings":"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","file":"/client/layout/layout.js.map","sourcesContent":["Template.layout.onCreated(function() {\n\tthis.autorun(() => {\n\n\t\tSession.set(LENGTH_FAV, Favourites.find().count());\n\t\tSession.set(LENGTH_NOT_FAV, Vocabulary.find().count() - Favourites.find().count());\n\t});\n});\n\n\nTemplate.layout.events({\n\t'click .btn-forward, click .btn-backward' (event, template) {\n\n\n\t\tlet self = this;\n\t\tif (Session.get(REVEALED)) {\n\t\t\tSession.set(REVEALED, false);\n\t\t}\n\t\tif (Session.get(TERM_WRONG)) {\n\t\t\tSession.set(TERM_WRONG, false);\n\t\t}\n\t\tif (document.getElementById(\"term\")) {\n\t\t\tdocument.getElementById(\"term\").value = '';\n\t\t\tif (document.getElementById(\"term\").disabled === true) {\n\t\t\t\tdocument.getElementById(\"term\").disabled = false;\n\t\t\t}\n\t\t}\n\t\t// log\n\t\tMeteor.call('dataViewedUser', self);\n\t\tMeteor.call('dataViewedAll', self);\n\n\t\tlet deviceType = Darwin.device.type;\n\t\tlet devicePlatform = Darwin.device.platform;\n\t\t// ['favDel', 'browse', 'favNotFav']\n\t\tlet clickArea = 'browse';\n\t\t// ['lesen', 'wort', 'definition', 'eingabe']\n\t\tlet mode;\n\t\tlet attention = Session.get(ATTENTION_MODE);\n\t\tif (Session.get(ATTENTION_MODE)) {\n\t\t\tmode  = Session.get(NAV_MODES)[Session.get(NAV_MODE_COUNT)];\n\t\t} else {\n\t\t\tmode  = 'eingabe';\n\t\t}\n\t\tMeteor.call('dataDetail', deviceType, devicePlatform, clickArea, mode, attention);\n\n\t},\n\t'click .btn-backward' (event, template) {\n\t\tlet val = 0;\n\t\tif (Session.get(SOURCE_FAV)) {\n\t\t\t// reset to avoid going into negative numbers and be able to circle backwards\n\t\t\tif (Session.get(COUNT_VIEWED) === 0) {\n\t\t\t\tval = Session.get(LENGTH_FAV) - 1;\n\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t} else {\n\t\t\t\tval = (Session.get(COUNT_VIEWED) - 1) % Session.get(LENGTH_FAV);\n\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t}\n\t\t} else {\n\t\t\tif (Session.get(COUNT_VIEWED) === 0) {\n\t\t\t\tval = Session.get(LENGTH_NOT_FAV) - 1;\n\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t} else {\n\t\t\t\tval = (Session.get(COUNT_VIEWED) - 1) % Session.get(LENGTH_NOT_FAV);\n\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t}\n\t\t}\n\t},\n\t'click .btn-forward' (event, template) {\n\t\tlet val = 0;\n\t\tif (Session.get(SOURCE_FAV)) {\n\t\t\tval = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_FAV);\n\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t} else {\n\t\t\tval = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_NOT_FAV);\n\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t}\n\t},\n\t'click .btn-reveal' (event, template) {\n\t\tif (!Session.get(REVEALED)) {\n\t\t\tSession.set(REVEALED, true);\n\t\t}\n\t\tif (document.getElementById(\"term\")) {\n\t\t\tif (document.getElementById(\"term\").disabled === false) {\n\t\t\t\tdocument.getElementById(\"term\").disabled = true;\n\t\t\t}\n\t\t}\n\t\t// log\n\t\tlet deviceType = Darwin.device.type;\n\t\tlet devicePlatform = Darwin.device.platform;\n\t\t// ['favDel', 'browse', 'favNotFav', 'reveal']\n\t\tlet clickArea = 'reveal';\n\t\t// ['lesen', 'wort', 'definition', 'eingabe']\n\t\tlet mode;\n\t\tlet attention = Session.get(ATTENTION_MODE);\n\t\tif (Session.get(ATTENTION_MODE)) {\n\t\t\tmode  = Session.get(NAV_MODES)[Session.get(NAV_MODE_COUNT)];\n\t\t} else {\n\t\t\tmode  = 'eingabe';\n\t\t}\n\t\tMeteor.call('dataDetail', deviceType, devicePlatform, clickArea, mode, attention);\n\n\t},\n\t'click .btn-insert, click .btn-delete' (event, template) {\n\t\tlet deviceType = Darwin.device.type;\n\t\tlet devicePlatform = Darwin.device.platform;\n\t\t// ['favDel', 'browse', 'favNotFav']\n\t\tlet clickArea = 'favDel';\n\t\t// ['lesen', 'wort', 'definition', 'eingabe']\n\t\tlet mode;\n\t\tlet attention = Session.get(ATTENTION_MODE);\n\t\tif (Session.get(ATTENTION_MODE)) {\n\t\t\tmode  = Session.get(NAV_MODES)[Session.get(NAV_MODE_COUNT)];\n\t\t} else {\n\t\t\tmode  = 'eingabe';\n\t\t}\n\t\tMeteor.call('dataDetail', deviceType, devicePlatform, clickArea, mode, attention);\n\t},\n\t'click .btn-insert' (event, template) {\n\t\tlet self = this;\n\t\tlet group = FlowRouter.current().route.group.name;\n\t\t// log start\n\t\tlet timestamp = new Date();\n\t\ttimestamp.setHours(0);\n\t\ttimestamp.setMinutes(0);\n\t\ttimestamp.setSeconds(0);\n\t\ttimestamp.setMilliseconds(0);\n\n\t\tif (group === 'high') {\n\t\t\tMeteor.call('dataFavHigh', timestamp.getTime());\n\t\t}\n\t\tif (group === 'low') {\n\t\t\tMeteor.call('dataFavLow', timestamp.getTime());\n\t\t}\n\t\t// log end\n\t\tMeteor.call('insertFavourite', self._id);\n\t\t// simulate source mode button for register page\n\t\tif (!Session.get(ATTENTION_MODE)) {\n\t\t\tSession.set(SOURCE_FAV, false);\n\t\t}\n\n\t\t// reset the COUNT VIEW when a list entry has been removed\n\t\tif (!Session.get(SOURCE_FAV) && Session.get(COUNT_VIEWED) >= Session.get(LENGTH_NOT_FAV) - 1) {\n\t\t\tlet val = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_NOT_FAV);\n\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t}\n\t\tif (Session.get(LENGTH_NOT_FAV) === 1) {\n\t\t\tSession.set(SOURCE_FAV, !Session.get(SOURCE_FAV));\n\t\t}\n\t},\n\n\t'click .btn-delete' (event, template) {\n\t\tlet self = this;\n\t\tlet group = FlowRouter.current().route.group.name;\n\t\t// log start\n\t\tlet timestamp = new Date();\n\t\ttimestamp.setHours(0);\n\t\ttimestamp.setMinutes(0);\n\t\ttimestamp.setSeconds(0);\n\t\ttimestamp.setMilliseconds(0);\n\n\t\tif (group === 'high') {\n\t\t\tMeteor.call('dataFavHigh', timestamp.getTime());\n\t\t}\n\t\tif (group === 'low') {\n\t\t\tMeteor.call('dataFavLow', timestamp.getTime());\n\t\t}\n\t\t// log end\n\n\t\tMeteor.call('deleteFavourite', self._id);\n\t\t// simulate source mode button for register page\n\t\tif (!Session.get(ATTENTION_MODE)) {\n\t\t\tSession.set(SOURCE_FAV, true);\n\t\t}\n\n\t\tif (Session.get(SOURCE_FAV) && Session.get(COUNT_VIEWED) >= Session.get(LENGTH_FAV) - 1) {\n\t\t\tlet val = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_FAV);\n\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t}\n\t\tif (Session.get(LENGTH_FAV) === 1) {\n\t\t\tSession.set(SOURCE_FAV, !Session.get(SOURCE_FAV));\n\t\t}\n\t}\n});\n"]},"hash":"364983b319ed6d78c517e90ea13c1ed4a1478d3a"}
