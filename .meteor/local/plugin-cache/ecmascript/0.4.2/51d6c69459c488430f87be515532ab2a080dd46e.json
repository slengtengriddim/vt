{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/server/publication.js","filenameRelative":"/server/publication.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/server/publication.js.map","sourceFileName":"/server/publication.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"publication"},"ignored":false,"code":"//  search query\nMeteor.publish('vocabularyRegister', function (search) {\n\tcheck(search, Match.OneOf(String, null, undefined));\n\tvar query = {},\n\t    projection = {\n\t\tlimit: 0,\n\t\tsort: {\n\t\t\tterm: 1\n\t\t}\n\t};\n\tif (search) {\n\t\tvar regex = new RegExp(search, 'i');\n\t\tquery = {\n\t\t\t$or: [{\n\t\t\t\tterm: regex\n\t\t\t}, {\n\t\t\t\tdescription: regex\n\t\t\t}]\n\t\t};\n\t\tprojection.limit = 0;\n\t}\n\treturn Vocabulary.find(query, projection);\n});\n\nMeteor.publish(\"vocabularyAll\", function () {\n\tvar data = Vocabulary.find({});\n\tif (data) {\n\t\treturn data;\n\t}\n\treturn this.ready();\n});\n\nMeteor.publish(\"ownedFavourites\", function () {\n\tvar currentUserId = this.userId;\n\tvar data = Favourites.find({\n\t\tuserId: currentUserId\n\t});\n\tif (data) {\n\t\treturn data;\n\t}\n\treturn this.ready();\n});\n\nMeteor.publish('singleEntry', function (entryId) {\n\treturn Vocabulary.find({\n\t\t_id: entryId\n\t});\n});\n\nMeteor.publish('dataViewedAll', function () {\n\tvar data = Data.Viewed.All.find({}, {\n\t\tlimit: 5,\n\t\tsort: {\n\t\t\ttimesViewed: -1\n\t\t}\n\t});\n\tif (data) {\n\t\treturn data;\n\t}\n\treturn this.ready();\n});\nMeteor.publish('dataViewedUser', function () {\n\tvar data = Data.Viewed.User.find({ userId: this.userId }, {\n\t\tlimit: 5,\n\t\tsort: {\n\t\t\ttimesViewed: -1\n\t\t}\n\t});\n\tif (data) {\n\t\treturn data;\n\t}\n\treturn this.ready();\n});\n\nMeteor.publish('dataFav', function () {\n\tvar data = Data.Fav.find({}, {\n\t\tsort: {}\n\t});\n\tif (data) {\n\t\treturn data;\n\t}\n\treturn this.ready();\n});\n\nMeteor.publish('people', function () {\n\tvar data = People.find({});\n\tif (data) {\n\t\treturn data;\n\t}\n\treturn this.ready();\n});","ast":null,"map":{"version":3,"sources":["/server/publication.js"],"names":[],"mappings":";AACA,OAAO,OAAP,CAAe,oBAAf,EAAqC,UAAS,MAAT,EAAiB;AACrD,OAAM,MAAN,EAAc,MAAM,KAAN,CAAY,MAAZ,EAAoB,IAApB,EAA0B,SAA1B,CAAd,EADqD;AAErD,KAAI,QAAQ,EAAR;KACH,aAAa;AACZ,SAAO,CAAP;AACA,QAAM;AACL,SAAM,CAAN;GADD;EAFD,CAHoD;AASrD,KAAI,MAAJ,EAAY;AACX,MAAI,QAAQ,IAAI,MAAJ,CAAW,MAAX,EAAmB,GAAnB,CAAR,CADO;AAEX,UAAQ;AACP,QAAK,CAAC;AACL,UAAM,KAAN;IADI,EAEF;AACF,iBAAa,KAAb;IAHI,CAAL;GADD,CAFW;AASX,aAAW,KAAX,GAAmB,CAAnB,CATW;EAAZ;AAWA,QAAO,WAAW,IAAX,CAAgB,KAAhB,EAAuB,UAAvB,CAAP,CApBqD;CAAjB,CAArC;;AAuBA,OAAO,OAAP,CAAe,eAAf,EAAgC,YAAW;AAC1C,KAAI,OAAO,WAAW,IAAX,CAAgB,EAAhB,CAAP,CADsC;AAE1C,KAAI,IAAJ,EAAU;AACT,SAAO,IAAP,CADS;EAAV;AAGA,QAAO,KAAK,KAAL,EAAP,CAL0C;CAAX,CAAhC;;AAQA,OAAO,OAAP,CAAe,iBAAf,EAAkC,YAAW;AAC5C,KAAI,gBAAgB,KAAK,MAAL,CADwB;AAE5C,KAAI,OAAO,WAAW,IAAX,CAAgB;AAC1B,UAAQ,aAAR;EADU,CAAP,CAFwC;AAK5C,KAAI,IAAJ,EAAU;AACT,SAAO,IAAP,CADS;EAAV;AAGA,QAAO,KAAK,KAAL,EAAP,CAR4C;CAAX,CAAlC;;AAWA,OAAO,OAAP,CAAe,aAAf,EAA8B,UAAS,OAAT,EAAkB;AAC/C,QAAO,WAAW,IAAX,CAAgB;AACtB,OAAK,OAAL;EADM,CAAP,CAD+C;CAAlB,CAA9B;;AAMA,OAAO,OAAP,CAAe,eAAf,EAAgC,YAAW;AAC1C,KAAI,OAAO,KAAK,MAAL,CAAY,GAAZ,CAAgB,IAAhB,CAAqB,EAArB,EAAyB;AACnC,SAAO,CAAP;AACA,QAAM;AACL,gBAAa,CAAC,CAAD;GADd;EAFU,CAAP,CADsC;AAO1C,KAAI,IAAJ,EAAU;AACT,SAAO,IAAP,CADS;EAAV;AAGA,QAAO,KAAK,KAAL,EAAP,CAV0C;CAAX,CAAhC;AAYA,OAAO,OAAP,CAAe,gBAAf,EAAiC,YAAW;AAC3C,KAAI,OAAO,KAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB,CAAsB,EAAC,QAAQ,KAAK,MAAL,EAA/B,EAA6C;AACvD,SAAO,CAAP;AACA,QAAM;AACL,gBAAa,CAAC,CAAD;GADd;EAFU,CAAP,CADuC;AAO3C,KAAI,IAAJ,EAAU;AACT,SAAO,IAAP,CADS;EAAV;AAGA,QAAO,KAAK,KAAL,EAAP,CAV2C;CAAX,CAAjC;;AAaA,OAAO,OAAP,CAAe,SAAf,EAA0B,YAAW;AACpC,KAAI,OAAO,KAAK,GAAL,CAAS,IAAT,CAAc,EAAd,EAAkB;AAC5B,QAAM,EAAN;EADU,CAAP,CADgC;AAMpC,KAAI,IAAJ,EAAU;AACT,SAAO,IAAP,CADS;EAAV;AAGA,QAAO,KAAK,KAAL,EAAP,CAToC;CAAX,CAA1B;;AAYA,OAAO,OAAP,CAAe,QAAf,EAAyB,YAAW;AACnC,KAAI,OAAO,OAAO,IAAP,CAAY,EAAZ,CAAP,CAD+B;AAEnC,KAAI,IAAJ,EAAU;AACT,SAAO,IAAP,CADS;EAAV;AAGA,QAAO,KAAK,KAAL,EAAP,CALmC;CAAX,CAAzB","file":"/server/publication.js.map","sourcesContent":["//  search query\nMeteor.publish('vocabularyRegister', function(search) {\n\tcheck(search, Match.OneOf(String, null, undefined));\n\tlet query = {},\n\t\tprojection = {\n\t\t\tlimit: 0,\n\t\t\tsort: {\n\t\t\t\tterm: 1\n\t\t\t}\n\t\t};\n\tif (search) {\n\t\tlet regex = new RegExp(search, 'i');\n\t\tquery = {\n\t\t\t$or: [{\n\t\t\t\tterm: regex\n\t\t\t}, {\n\t\t\t\tdescription: regex\n\t\t\t}]\n\t\t};\n\t\tprojection.limit = 0;\n\t}\n\treturn Vocabulary.find(query, projection);\n});\n\nMeteor.publish(\"vocabularyAll\", function() {\n\tlet data = Vocabulary.find({});\n\tif (data) {\n\t\treturn data;\n\t}\n\treturn this.ready();\n});\n\nMeteor.publish(\"ownedFavourites\", function() {\n\tlet currentUserId = this.userId;\n\tlet data = Favourites.find({\n\t\tuserId: currentUserId\n\t});\n\tif (data) {\n\t\treturn data;\n\t}\n\treturn this.ready();\n});\n\nMeteor.publish('singleEntry', function(entryId) {\n\treturn Vocabulary.find({\n\t\t_id: entryId\n\t});\n});\n\nMeteor.publish('dataViewedAll', function() {\n\tlet data = Data.Viewed.All.find({}, {\n\t\tlimit: 5,\n\t\tsort: {\n\t\t\ttimesViewed: -1\n\t\t}\n\t});\n\tif (data) {\n\t\treturn data;\n\t}\n\treturn this.ready();\n});\nMeteor.publish('dataViewedUser', function() {\n\tlet data = Data.Viewed.User.find({userId: this.userId}, {\n\t\tlimit: 5,\n\t\tsort: {\n\t\t\ttimesViewed: -1\n\t\t}\n\t});\n\tif (data) {\n\t\treturn data;\n\t}\n\treturn this.ready();\n});\n\nMeteor.publish('dataFav', function() {\n\tlet data = Data.Fav.find({}, {\n\t\tsort: {\n\n\t\t}\n\t});\n\tif (data) {\n\t\treturn data;\n\t}\n\treturn this.ready();\n});\n\nMeteor.publish('people', function() {\n\tlet data = People.find({});\n\tif (data) {\n\t\treturn data;\n\t}\n\treturn this.ready();\n});\n"]},"hash":"51d6c69459c488430f87be515532ab2a080dd46e"}
