{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/views/high/trainer/trainer.js","filenameRelative":"/client/views/high/trainer/trainer.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/views/high/trainer/trainer.js.map","sourceFileName":"/client/views/high/trainer/trainer.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"trainer"},"ignored":false,"code":"Template.trainer.onCreated(function () {\n\tvar template = Template.instance();\n\ttemplate.isAlphabetic = new ReactiveVar(true);\n\ttemplate.isLength64 = new ReactiveVar(true);\n\n\ttemplate.autorun(function () {\n\t\ttemplate.subscribe('vocabularyAll'); // Vocabulary.find()\n\t\ttemplate.subscribe('ownedFavourites'); // Favourites.find()\n\n\t\tSession.set(LENGTH_FAV, Favourites.find().count());\n\t\tSession.set(LENGTH_NOT_FAV, Vocabulary.find().count() - Favourites.find().count());\n\t});\n});\n\nTemplate.trainer.helpers({\n\tisAlphabetic: function () {\n\t\tfunction isAlphabetic() {\n\t\t\treturn Template.instance().isAlphabetic.get();\n\t\t}\n\n\t\treturn isAlphabetic;\n\t}(),\n\tisLength64: function () {\n\t\tfunction isLength64() {\n\t\t\treturn Template.instance().isLength64.get();\n\t\t}\n\n\t\treturn isLength64;\n\t}(),\n\ttermPercent: function () {\n\t\tfunction termPercent() {\n\t\t\treturn Math.floor(Session.get(COUNT_LETTERS_MATCH) / this.term.length * 100);\n\t\t}\n\n\t\treturn termPercent;\n\t}()\n});\n\nTemplate.trainer.events({\n\t'keyup [name=\"term\"]': function () {\n\t\tfunction keyupNameTerm(event, template) {\n\t\t\tvar value = event.target.value.toLowerCase();\n\n\t\t\tif (value !== '') {\n\t\t\t\t// check if string is valid\n\t\t\t\tif (Validate.isAlphabetic(value)) {\n\t\t\t\t\ttemplate.isAlphabetic.set(true);\n\t\t\t\t} else {\n\t\t\t\t\ttemplate.isAlphabetic.set(false);\n\t\t\t\t}\n\t\t\t\tif (Validate.isLength64(value)) {\n\t\t\t\t\ttemplate.isLength64.set(true);\n\t\t\t\t} else {\n\t\t\t\t\ttemplate.isLength64.set(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO exclude spaces\n\t\t\t// && event.keyCode === 13\n\t\t\tif (value !== '') {\n\t\t\t\tif (template.isAlphabetic.get() && template.isLength64.get()) {\n\t\t\t\t\tvar term = this.term.toLowerCase();\n\n\t\t\t\t\tif (term === value) {\n\t\t\t\t\t\tif (Session.get(TERM_WRONG)) {\n\t\t\t\t\t\t\tSession.set(TERM_WRONG, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tSession.set(TERM_RIGHT, true);\n\t\t\t\t\t\tevent.target.disabled = true;\n\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tSession.set(REVEALED, false);\n\t\t\t\t\t\t\tSession.set(TERM_RIGHT, false);\n\t\t\t\t\t\t\tevent.target.disabled = false;\n\t\t\t\t\t\t\tevent.target.value = \"\";\n\t\t\t\t\t\t\tconsole.log(event.target);\n\t\t\t\t\t\t\tconsole.log(document.getElementById(\"term\"));\n\n\t\t\t\t\t\t\tif (document.getElementById(\"term\")) {\n\t\t\t\t\t\t\t\tdocument.getElementById(\"term\").value = '';\n\t\t\t\t\t\t\t\tif (document.getElementById(\"term\").disabled === true) {\n\t\t\t\t\t\t\t\t\tdocument.getElementById(\"term\").disabled = false;\n\t\t\t\t\t\t\t\t\tdocument.getElementById(\"term\").autofocus = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdocument.getElementById(\"term\").focus();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar val = 0;\n\t\t\t\t\t\t\tif (Session.get(RANDOM_FAV)) {\n\t\t\t\t\t\t\t\tval = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_FAV);\n\t\t\t\t\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tval = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_NOT_FAV);\n\t\t\t\t\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSession.set(TERM_WRONG, true);\n\n\t\t\t\t\t\tvar termArray = R.split('', term);\n\t\t\t\t\t\tvar f = function () {\n\t\t\t\t\t\t\tfunction f(x, y) {\n\t\t\t\t\t\t\t\tvar space = \"_\";\n\t\t\t\t\t\t\t\tif (x === y) {\n\t\t\t\t\t\t\t\t\treturn x;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn space;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn f;\n\t\t\t\t\t\t}();\n\t\t\t\t\t\tvar cheese = R.zipWith(f, term, value);\n\t\t\t\t\t\twhile (cheese.length < term.length) {\n\t\t\t\t\t\t\tcheese = R.append('_', cheese);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar countMatch = term.length - R.filter(R.equals('_'), cheese).length;\n\t\t\t\t\t\tSession.set(COUNT_LETTERS_MATCH, countMatch);\n\n\t\t\t\t\t\tcheese = R.join(' ', cheese);\n\t\t\t\t\t\tSession.set(TERM_CACHE, cheese);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value === '') {\n\t\t\t\ttemplate.isAlphabetic.set(true);\n\t\t\t\ttemplate.isLength64.set(true);\n\n\t\t\t\tvar _cheese = '';\n\t\t\t\twhile (_cheese.length < this.term.length) {\n\t\t\t\t\t_cheese = R.append('_', _cheese);\n\t\t\t\t}\n\t\t\t\t_cheese = R.join(' ', _cheese);\n\t\t\t\tSession.set(TERM_CACHE, _cheese);\n\t\t\t}\n\t\t}\n\n\t\treturn keyupNameTerm;\n\t}()\n});","ast":null,"map":{"version":3,"sources":["/client/views/high/trainer/trainer.js"],"names":[],"mappings":"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","file":"/client/views/high/trainer/trainer.js.map","sourcesContent":["Template.trainer.onCreated(() => {\n\tlet template = Template.instance();\n\ttemplate.isAlphabetic = new ReactiveVar(true);\n\ttemplate.isLength64 = new ReactiveVar(true);\n\n\ttemplate.autorun(() => {\n\t\ttemplate.subscribe('vocabularyAll'); // Vocabulary.find()\n\t\ttemplate.subscribe('ownedFavourites'); // Favourites.find()\n\n\t\tSession.set(LENGTH_FAV, Favourites.find().count());\n\t\tSession.set(LENGTH_NOT_FAV, Vocabulary.find().count() - Favourites.find().count());\n\t});\n});\n\nTemplate.trainer.helpers({\n\tisAlphabetic() {\n\t\treturn Template.instance().isAlphabetic.get();\n\t},\n\tisLength64() {\n\t\treturn Template.instance().isLength64.get();\n\t},\n\ttermPercent() {\n\t\treturn Math.floor((Session.get(COUNT_LETTERS_MATCH) / this.term.length) * 100);\n\t}\n});\n\nTemplate.trainer.events({\n\t'keyup [name=\"term\"]' (event, template) {\n\t\tlet value = event.target.value.toLowerCase();\n\n\t\tif (value !== '') {\n\t\t\t// check if string is valid\n\t\t\tif (Validate.isAlphabetic(value)) {\n\t\t\t\ttemplate.isAlphabetic.set(true);\n\t\t\t} else {\n\t\t\t\ttemplate.isAlphabetic.set(false);\n\t\t\t}\n\t\t\tif (Validate.isLength64(value)) {\n\t\t\t\ttemplate.isLength64.set(true);\n\t\t\t} else {\n\t\t\t\ttemplate.isLength64.set(false);\n\t\t\t}\n\t\t}\n\n\t\t// TODO exclude spaces\n\t\t// && event.keyCode === 13\n\t\tif (value !== '') {\n\t\t\tif (template.isAlphabetic.get() && template.isLength64.get()) {\n\t\t\t\tlet term = this.term.toLowerCase();\n\n\t\t\t\tif (term === value) {\n\t\t\t\t\tif (Session.get(TERM_WRONG)) {\n\t\t\t\t\t\tSession.set(TERM_WRONG, false);\n\t\t\t\t\t}\n\t\t\t\t\tSession.set(TERM_RIGHT, true);\n\t\t\t\t\tevent.target.disabled = true;\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tSession.set(REVEALED, false);\n\t\t\t\t\t\tSession.set(TERM_RIGHT, false);\n\t\t\t\t\t\tevent.target.disabled = false;\n\t\t\t\t\t\tevent.target.value = \"\";\n\t\t\t\t\t\tconsole.log(event.target);\n\t\t\t\t\t\tconsole.log(document.getElementById(\"term\"));\n\n\t\t\t\t\t\tif (document.getElementById(\"term\")) {\n\t\t\t\t\t\t\tdocument.getElementById(\"term\").value = '';\n\t\t\t\t\t\t\tif (document.getElementById(\"term\").disabled === true) {\n\t\t\t\t\t\t\t\tdocument.getElementById(\"term\").disabled = false;\n\t\t\t\t\t\t\t\tdocument.getElementById(\"term\").autofocus = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdocument.getElementById(\"term\").focus();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet val = 0;\n\t\t\t\t\t\tif (Session.get(RANDOM_FAV)) {\n\t\t\t\t\t\t\tval = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_FAV);\n\t\t\t\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tval = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_NOT_FAV);\n\t\t\t\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, 1000);\n\t\t\t\t} else {\n\t\t\t\t\tSession.set(TERM_WRONG, true);\n\n\t\t\t\t\tlet termArray = R.split('', term);\n\t\t\t\t\tlet f = (x, y) => {\n\t\t\t\t\t\tlet space = \"_\";\n\t\t\t\t\t\tif (x === y) {\n\t\t\t\t\t\t\treturn x;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn space;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet cheese = R.zipWith(f, term, value);\n\t\t\t\t\twhile (cheese.length < term.length) {\n\t\t\t\t\t\tcheese = R.append('_', cheese);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet countMatch = term.length - R.filter(R.equals('_'), cheese).length;\n\t\t\t\t\tSession.set(COUNT_LETTERS_MATCH, countMatch);\n\n\t\t\t\t\tcheese = R.join(' ', cheese);\n\t\t\t\t\tSession.set(TERM_CACHE, cheese);\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (value === '') {\n\t\t\ttemplate.isAlphabetic.set(true);\n\t\t\ttemplate.isLength64.set(true);\n\n\t\t\tlet cheese = '';\n\t\t\twhile (cheese.length < this.term.length) {\n\t\t\t\tcheese = R.append('_', cheese);\n\t\t\t}\n\t\t\tcheese = R.join(' ', cheese);\n\t\t\tSession.set(TERM_CACHE, cheese);\n\t\t}\n\t}\n});\n"]},"hash":"188f3a9e836da09dbf40312c46e36fcad4a07ab5"}
