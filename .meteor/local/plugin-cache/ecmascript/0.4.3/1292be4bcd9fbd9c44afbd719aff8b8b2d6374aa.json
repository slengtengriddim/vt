{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/views/high/index/components/term_day.js","filenameRelative":"/client/views/high/index/components/term_day.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/views/high/index/components/term_day.js.map","sourceFileName":"/client/views/high/index/components/term_day.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"term_day"},"ignored":false,"code":"Template.termDay.onCreated(function () {\n\tvar template = Template.instance();\n\ttemplate.subscribe('vocabularyAll');\n\ttemplate.subscribe('termDay');\n});\n\nTemplate.termDay.helpers({\n\ttermDay: function () {\n\t\tfunction termDay() {\n\t\t\tvar currentUserId = this.userId;\n\t\t\tvar favIds = R.pluck('vocabularyId')(Favourites.find().fetch());\n\t\t\tvar vocabulary = Vocabulary.find({\n\t\t\t\t_id: {\n\t\t\t\t\t$nin: favIds\n\t\t\t\t}\n\t\t\t}).fetch();\n\n\t\t\treturn vocabulary[Session.get(COUNT_VIEWED)];\n\t\t}\n\n\t\treturn termDay;\n\t}()\n});\n\nvar termDayIds = R.pluck('vocabularyId')(TermDay.find({\n\tuserId: obj._id\n}).fetch());\nvar vocabulary = Vocabulary.find({\n\t_id: {\n\t\t$nin: termDayIds\n\t}\n}).fetch();\nif (!lastEntryTermDay || lastEntryTermDay.timestamp.getDate() !== today.getDate()) {\n\tTermDay.insert({\n\t\tuserId: obj._id,\n\t\tvocabularyId: vocabulary[Math.floor(Math.random() * vocabulary.length)]._id\n\t});\n}","ast":null,"map":{"version":3,"sources":["/client/views/high/index/components/term_day.js"],"names":[],"mappings":"AAAA,SAAS,OAAT,CAAiB,SAAjB,CAA2B,YAAM;AAChC,KAAI,WAAW,SAAS,QAAT,EAAX,CAD4B;AAEhC,UAAS,SAAT,CAAmB,eAAnB,EAFgC;AAGhC,UAAS,SAAT,CAAmB,SAAnB,EAHgC;CAAN,CAA3B;;AAMA,SAAS,OAAT,CAAiB,OAAjB,CAAyB;AACxB;qBAAU;AACT,OAAI,gBAAgB,KAAK,MAAL,CADX;AAET,OAAI,SAAS,EAAE,KAAF,CAAQ,cAAR,EAAwB,WAAW,IAAX,GAAkB,KAAlB,EAAxB,CAAT,CAFK;AAGT,OAAI,aAAa,WAAW,IAAX,CAAgB;AAC/B,SAAK;AACJ,WAAM,MAAN;KADD;IADe,EAIb,KAJa,EAAb,CAHK;;AAST,UAAO,WAAW,QAAQ,GAAR,CAAY,YAAZ,CAAX,CAAP,CATS;;;;IADc;CAAzB;;AAeA,IAAI,aAAa,EAAE,KAAF,CAAQ,cAAR,EAAwB,QAAQ,IAAR,CAAa;AACrD,SAAQ,IAAI,GAAJ;CADgC,EAEtC,KAFsC,EAAxB,CAAb;AAGJ,IAAI,aAAa,WAAW,IAAX,CAAgB;AAChC,MAAK;AACJ,QAAM,UAAN;EADD;CADgB,EAId,KAJc,EAAb;AAKJ,IAAI,CAAC,gBAAD,IAAqB,iBAAiB,SAAjB,CAA2B,OAA3B,OAAyC,MAAM,OAAN,EAAzC,EAA0D;AAClF,SAAQ,MAAR,CAAe;AACd,UAAQ,IAAI,GAAJ;AACR,gBAAc,WAAW,KAAK,KAAL,CAAW,KAAK,MAAL,KAAgB,WAAW,MAAX,CAAtC,EAA0D,GAA1D;EAFf,EADkF;CAAnF","file":"/client/views/high/index/components/term_day.js.map","sourcesContent":["Template.termDay.onCreated(() => {\n\tlet template = Template.instance();\n\ttemplate.subscribe('vocabularyAll');\n\ttemplate.subscribe('termDay');\n});\n\nTemplate.termDay.helpers({\n\ttermDay() {\n\t\tlet currentUserId = this.userId;\n\t\tlet favIds = R.pluck('vocabularyId')(Favourites.find().fetch());\n\t\tlet vocabulary = Vocabulary.find({\n\t\t\t\t_id: {\n\t\t\t\t\t$nin: favIds\n\t\t\t\t}\n\t\t\t}).fetch();\n\n\t\treturn vocabulary[Session.get(COUNT_VIEWED)];\n\t}\n})\n\n\nlet termDayIds = R.pluck('vocabularyId')(TermDay.find({\n\tuserId: obj._id\n}).fetch());\nlet vocabulary = Vocabulary.find({\n\t_id: {\n\t\t$nin: termDayIds\n\t}\n}).fetch();\nif (!lastEntryTermDay || lastEntryTermDay.timestamp.getDate() !== today.getDate()) {\n\tTermDay.insert({\n\t\tuserId: obj._id,\n\t\tvocabularyId: vocabulary[Math.floor(Math.random() * vocabulary.length)]._id\n\t});\n}\n"]},"hash":"1292be4bcd9fbd9c44afbd719aff8b8b2d6374aa"}
