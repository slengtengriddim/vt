{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/views/trainer/eingabe.js","filenameRelative":"/client/views/trainer/eingabe.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/views/trainer/eingabe.js.map","sourceFileName":"/client/views/trainer/eingabe.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"eingabe"},"ignored":false,"code":"Template.trainerEingabe.onCreated(function () {\n\tvar template = Template.instance();\n\n\ttemplate.isAlphabetic = new ReactiveVar(true);\n\ttemplate.isLength64 = new ReactiveVar(true);\n});\n\nTemplate.trainerEingabe.helpers({\n\tisAlphabetic: function () {\n\t\tfunction isAlphabetic() {\n\t\t\treturn Template.instance().isAlphabetic.get();\n\t\t}\n\n\t\treturn isAlphabetic;\n\t}(),\n\tisLength64: function () {\n\t\tfunction isLength64() {\n\t\t\treturn Template.instance().isLength64.get();\n\t\t}\n\n\t\treturn isLength64;\n\t}(),\n\tentry: function () {\n\t\tfunction entry() {\n\t\t\tvar currentUserId = this.userId;\n\t\t\tvar favIds = R.pluck('vocabularyId')(Favourites.find().fetch());\n\t\t\tvar vocabulary = [];\n\n\t\t\tif (Session.get('randomFavourites')) {\n\t\t\t\tvocabulary = Vocabulary.find({\n\t\t\t\t\t_id: {\n\t\t\t\t\t\t$in: favIds\n\t\t\t\t\t}\n\t\t\t\t}).fetch();\n\t\t\t} else {\n\t\t\t\tvocabulary = Vocabulary.find({\n\t\t\t\t\t_id: {\n\t\t\t\t\t\t$nin: favIds\n\t\t\t\t\t}\n\t\t\t\t}).fetch();\n\t\t\t}\n\t\t\treturn vocabulary[Session.get(COUNT_VIEWED)];\n\t\t}\n\n\t\treturn entry;\n\t}(),\n\tcountViewed: function () {\n\t\tfunction countViewed() {\n\t\t\treturn Session.get(COUNT_VIEWED);\n\t\t}\n\n\t\treturn countViewed;\n\t}(),\n\tlengthIsOne: function () {\n\t\tfunction lengthIsOne() {\n\t\t\treturn Session.get(LENGTH_FAV) === 1 && Session.get(RANDOM_FAV) || Session.get(LENGTH_NOT_FAV) === 1 && Session.get(RANDOM_NOT_FAV);\n\t\t}\n\n\t\treturn lengthIsOne;\n\t}()\n});\n\nTemplate.trainerEingabe.events({\n\t'keyup [name=\"term\"]': function () {\n\t\tfunction keyupNameTerm(event, template) {\n\t\t\tvar value = event.target.value.trim().toLowerCase();\n\n\t\t\tif (value !== '') {\n\t\t\t\t// check if string is valid\n\t\t\t\tif (Validate.isAlphabetic(value)) {\n\t\t\t\t\ttemplate.isAlphabetic.set(true);\n\t\t\t\t} else {\n\t\t\t\t\ttemplate.isAlphabetic.set(false);\n\t\t\t\t}\n\t\t\t\tif (Validate.isLength64(value)) {\n\t\t\t\t\ttemplate.isLength64.set(true);\n\t\t\t\t} else {\n\t\t\t\t\ttemplate.isLength64.set(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO exclude spaces\n\n\t\t\tif (value !== '' && event.keyCode === 13) {\n\t\t\t\tif (template.isAlphabetic.get() && template.isLength64.get()) {\n\t\t\t\t\tvar term = this.term.toLowerCase();\n\n\t\t\t\t\tif (term === value) {\n\t\t\t\t\t\tif (Session.get(TERM_WRONG)) {\n\t\t\t\t\t\t\tSession.set(TERM_WRONG, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tSession.set(TERM_RIGHT, true);\n\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tSession.set(TERM_RIGHT, false);\n\n\t\t\t\t\t\t\tvar val = 0;\n\t\t\t\t\t\t\tif (Session.get(RANDOM_FAV)) {\n\t\t\t\t\t\t\t\tval = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_FAV);\n\t\t\t\t\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tval = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_NOT_FAV);\n\t\t\t\t\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSession.set(TERM_WRONG, true);\n\n\t\t\t\t\t\tvar termArray = R.split('', term);\n\n\t\t\t\t\t\tvar f = function () {\n\t\t\t\t\t\t\tfunction f(x, y) {\n\t\t\t\t\t\t\t\tvar space = \"_\";\n\t\t\t\t\t\t\t\tif (x === y) {\n\t\t\t\t\t\t\t\t\treturn x;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn space;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn f;\n\t\t\t\t\t\t}();\n\n\t\t\t\t\t\tvar cheese = R.join(' ', R.zipWith(f, term, value));\n\t\t\t\t\t\tvar cheseChache = cheese;\n\n\t\t\t\t\t\tconsole.log(cheese.length);\n\t\t\t\t\t\tconsole.log(term);\n\t\t\t\t\t\twhile (cheese.length < term.length) {\n\t\t\t\t\t\t\tR.append('_', cheese);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tSession.set(TERM_CACHE, cheese);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value === '') {\n\t\t\t\ttemplate.isAlphabetic.set(true);\n\t\t\t\ttemplate.isLength64.set(true);\n\t\t\t}\n\t\t}\n\n\t\treturn keyupNameTerm;\n\t}()\n});","ast":null,"map":{"version":3,"sources":["/client/views/trainer/eingabe.js"],"names":[],"mappings":"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","file":"/client/views/trainer/eingabe.js.map","sourcesContent":["Template.trainerEingabe.onCreated(() => {\n\tlet template = Template.instance();\n\n\ttemplate.isAlphabetic = new ReactiveVar(true);\n\ttemplate.isLength64 = new ReactiveVar(true);\n\n});\n\n\n\nTemplate.trainerEingabe.helpers({\n\tisAlphabetic() {\n\t\treturn Template.instance().isAlphabetic.get();\n\t},\n\tisLength64() {\n\t\treturn Template.instance().isLength64.get();\n\t},\n\tentry() {\n\t\tlet currentUserId = this.userId;\n\t\tlet favIds = R.pluck('vocabularyId')(Favourites.find().fetch());\n\t\tlet vocabulary = [];\n\n\t\tif (Session.get('randomFavourites')) {\n\t\t\tvocabulary = Vocabulary.find({\n\t\t\t\t_id: {\n\t\t\t\t\t$in: favIds\n\t\t\t\t}\n\t\t\t}).fetch();\n\t\t} else {\n\t\t\tvocabulary = Vocabulary.find({\n\t\t\t\t_id: {\n\t\t\t\t\t$nin: favIds\n\t\t\t\t}\n\t\t\t}).fetch();\n\t\t}\n\t\treturn vocabulary[Session.get(COUNT_VIEWED)];\n\t},\n\tcountViewed() {\n\t\treturn Session.get(COUNT_VIEWED);\n\t},\n\tlengthIsOne() {\n\t\treturn (Session.get(LENGTH_FAV) === 1) && Session.get(RANDOM_FAV) ||\n\t\t\t(Session.get(LENGTH_NOT_FAV) === 1) && Session.get(RANDOM_NOT_FAV);\n\t}\n});\n\nTemplate.trainerEingabe.events({\n\t'keyup [name=\"term\"]' (event, template) {\n\t\tlet value = event.target.value.trim().toLowerCase();\n\n\t\tif (value !== '') {\n\t\t\t// check if string is valid\n\t\t\tif (Validate.isAlphabetic(value)) {\n\t\t\t\ttemplate.isAlphabetic.set(true);\n\t\t\t} else {\n\t\t\t\ttemplate.isAlphabetic.set(false);\n\t\t\t}\n\t\t\tif (Validate.isLength64(value)) {\n\t\t\t\ttemplate.isLength64.set(true);\n\t\t\t} else {\n\t\t\t\ttemplate.isLength64.set(false);\n\t\t\t}\n\t\t}\n\n\t\t// TODO exclude spaces\n\n\t\tif (value !== '' && event.keyCode === 13) {\n\t\t\tif (template.isAlphabetic.get() && template.isLength64.get()) {\n\t\t\t\tlet term = this.term.toLowerCase();\n\n\t\t\t\tif (term === value) {\n\t\t\t\t\tif (Session.get(TERM_WRONG)) {\n\t\t\t\t\t\tSession.set(TERM_WRONG, false);\n\t\t\t\t\t}\n\t\t\t\t\tSession.set(TERM_RIGHT, true);\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tSession.set(TERM_RIGHT, false);\n\n\t\t\t\t\t\tlet val = 0;\n\t\t\t\t\t\tif (Session.get(RANDOM_FAV)) {\n\t\t\t\t\t\t\tval = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_FAV);\n\t\t\t\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tval = (Session.get(COUNT_VIEWED) + 1) % Session.get(LENGTH_NOT_FAV);\n\t\t\t\t\t\t\tSession.set(COUNT_VIEWED, val);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, 1000);\n\t\t\t\t} else {\n\t\t\t\t\tSession.set(TERM_WRONG, true);\n\n\t\t\t\t\tlet termArray = R.split('', term);\n\n\t\t\t\t\tlet f = (x, y) => {\n\t\t\t\t\t\tlet space = \"_\";\n\t\t\t\t\t\tif (x === y) {\n\t\t\t\t\t\t\treturn x;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn space;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet cheese = R.join(' ', R.zipWith(f, term, value));\n\t\t\t\t\tlet cheseChache = cheese;\n\n\t\t\t\t\tconsole.log(cheese.length);\n\t\t\t\t\tconsole.log(term);\n\t\t\t\t\twhile (cheese.length < term.length) {\n\t\t\t\t\t\tR.append('_', cheese)\n\t\t\t\t\t}\n\n\t\t\t\t\tSession.set(TERM_CACHE, cheese);\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (value === '') {\n\t\t\ttemplate.isAlphabetic.set(true);\n\t\t\ttemplate.isLength64.set(true);\n\t\t}\n\t}\n});\n"]},"hash":"1a61ac9212479332f8830d2d335df53f9df5c3e6"}
